<!DOCTYPE html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>awescnb test1 - 已注销用户456123 - 博客园</title>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/default.min.css" />
    <link rel="stylesheet" href="https://www.cnblogs.com/css/blog-common.min.css?v=BKtyzabbeYJEVOaELkxmRjHbp7LT-v37GzrU5S24bJk">
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js"></script>
</head>

<body>
    <div id="home">
        <div id="header">
            <div id="blogTitle">
                <a id="lnkBlogLogo" href="https://www.cnblogs.com/guangzanassistant/"><img id="blogLogo" src="https://dummyimage.com/50" alt="返回主页"></a>
                <h1><a id="Header1_HeaderTitle" class="headermaintitle
                        HeaderMainTitle" href="https://www.cnblogs.com/guangzanassistant/">已注销</a>
                </h1>
                <h2></h2>
            </div>
            <div id="navigator">
                <ul id="navList">
                    <li><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">
                            博客园</a>
                    </li>
                    <li>
                        <a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/guangzanassistant/">
                            首页</a>
                    </li>
                    <li>

                        <a id="blog_nav_newpost" class="menu" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">
                            新随笔</a>
                    </li>
                    <li>
                        <a id="blog_nav_contact" class="menu" href="https://msg.cnblogs.com/send/%E5%B7%B2%E6%B3%A8%E9%94%80%E7%94%A8%E6%88%B7456123">
                            联系</a></li>
                    <li>
                        <a id="blog_nav_rss" class="menu" href="https://www.cnblogs.com/guangzanassistant/rss/">
                            订阅</a>
                        <!--<partial name="./Shared/_XmlLink.cshtml" model="Model" /></li>-->
                    </li>
                    <li>
                        <a id="blog_nav_admin" class="menu" href="https://i.cnblogs.com/">
                            管理</a>
                    </li>
                </ul>


                <div class="blogStats">

                    <span id="stats_post_count">随笔 -
                        4&nbsp; </span>
                    <span id="stats_article_count">文章 -
                        0&nbsp; </span>
                    <span id="stats-comment_count">评论 -
                        1</span>


                </div>
                <!--end: blogStats -->
            </div>
            <!--end: navigator 博客导航栏 -->
        </div>
        <div id="main">
            <div id="mainContent">
                <div class="forFlow">
                    <div id="post_detail">
                        <div id="topics">
                            <div class="post">
                                <div id="custom-post-message">
                                    <div class="custom-post-message-top">
                                        <div class="custom-categories">🎈</div>
                                        <div class="custom-tags">🏷<a href="https://www.cnblogs.com/yubaolee/tag/OpenAuth.net/">OpenAuth.net</a><a href="https://www.cnblogs.com/yubaolee/tag/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/">权限管理</a></div>
                                    </div>
                                    <div class="custom-post-message-bottom">
                                        <span>2019-11-27 07:42</span>
                                        <span>阅读 4356</span>
                                        <span>评论 24</span>
                                    </div>
                                </div>

                                <h1 class="postTitle"><svg class="icon" aria-hidden="true">
                                        <use xlink:href="#ac-pen"></use>
                                    </svg>

                                    <a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/yubaolee/p/DataPrivilege.html">大话设计，没有模式—通用权限设计与实现</a>

                                </h1>
                                <div class="clear"></div>
                                <div class="postBody">

                                    <div id="cnblogs_post_description" style="display: none">
                                        当代码写多了，总有些是经验，但经验是什么呢？if…else用的次数比别人多？显然不是。有些超棒的设计可以谓之经验！网络上流行的经典的权限设计是【主体】- 【领域】 - 【权限】( who、what、how问题原型 ) 的设计思想，数据权限是在功能权限的基础上面进一步的扩展，比如可以查看订单属于【功能权限】的范围，但是可以查看哪些订单就是【数据权限】的工作了。
                                    </div>
                                    <div id="cnblogs_post_body" class="blogpost-body ">
                                        <p><span style="font-size: medium;">当代码写多了，总有些是经验，但经验是什么呢？if…else用的次数比别人多？显然不是。有些超棒的设计可以谓之经验！</span></p>
                                        <h2>功能权限 </h2>
                                        <p><span style="font-size: medium;">网络上流行的经典的权限设计是【主体】- 【领域】 - 【权限】( who、what、how问题原型 ) 的设计思想，其中：</span></p>
                                        <p><span style="font-size: medium;">【主体】可以是用户，可以是角色，也可以是一个部门</span></p>
                                        <p><span style="font-size: medium;">【领域】可以是一个模块，可以是一个页面，也可以是页面上的按钮</span></p>
                                        <p><span style="font-size: medium;">【权限】可以是“可见”，可以是“只读”，也可以是“可用”(如按钮可以点击)</span></p>
                                        <p><span style="font-size: medium;">为了简化程序开发，在<a href="https://gitee.com/yubaolee/OpenAuth.Core" target="_blank">OpenAuth.Core</a>中去掉了权限的控制，简化为【主体】- 【领域】的模式，且【主体】限定为角色。<span style="font-size: medium;">即只能给角色分配模块和按钮，不能直接分配给用户账号或部门。且一旦分配即表示该角色拥有操作该模块（按钮）的权限。</span></span></p>
                                        <p><a href="https://img2018.cnblogs.com/blog/42655/201911/42655-20191119225617440-1297104227.png"><span style="font-size: medium;"><a class="lightbox-post" href="https://img2018.cnblogs.com/blog/42655/201911/42655-20191119225617919-670935057.png"><img style="display: inline; background-image: none;" title="file-read-61" src="https://img2018.cnblogs.com/blog/42655/201911/42655-20191119225617919-670935057.png" alt="file-read-61" width="276" height="344" border="0"></a></span></a></p>
                                        <p><span style="font-size: medium;">大道至简，标准的RBAC规范比这个还要简洁，所以它的生命力才最顽强。在此基础上，如果进行二次开发，进行更详细的功能权限控制，可以按照上面的思想进行改造。</span></p>
                                        <h2>数据权限 </h2>
                                        <p><span style="font-size: medium;">数据权限是在功能权限的基础上面进一步的扩展，比如可以查看订单属于【功能权限】的范围，但是可以查看哪些订单就是【数据权限】的工作了。</span></p>
                                        <p><span style="font-size: medium;">这里面的几个概念：</span></p>
                                        <p><span style="font-size: medium;">【资源】：数据权限的控制对象，业务系统中的各种资源。比如订单单据、销售单等。</span></p>
                                        <p><span style="font-size: medium;">【数据规则】：用于数据权限的条件规则 。</span></p>
                                        <h3>应用场景 </h3>
                                        <ul>
                                            <li><span style="font-size: medium;">销售单，可以由本人查看</span></li>
                                            <li><span style="font-size: medium;">销售单，测试角色能看到自己的订单</span></li>
                                            <li><span style="font-size: medium;">销售单，测试角色能看到自己的订单，管理员角色可以看到所有订单</span></li>
                                            <li><span style="font-size: medium;">销售单，测试角色能看到自己的订单，管理员角色可以看到所有订单，账号test3可以看到应用名称为"xxx管理系统"的订单</span></li>
                                        </ul>
                                        <p><span style="font-size: medium;">我们能想到直接的方法，在访问数据的入口加入SQL Where条件来实现，以上4种情况对应的sql语句：</span></p>
                                        <div class="cnblogs_code">
                                            <pre><span style="color: #008080;">  1</span> <span style="color: #0000ff;">where</span> CreateUserID = {loginUser}
<span style="color: #008080;">  2</span> <span style="color: #0000ff;">where</span> CreateUserID = {loginUser} <span style="color: #0000ff;">and</span> {loginRole} <span style="color: #0000ff;">in</span> (测试）
<span style="color: #008080;">  3</span> <span style="color: #0000ff;">where</span> CreateUserID = ({loginUser} <span style="color: #0000ff;">and</span> {loginRole} <span style="color: #0000ff;">in</span> (测试)) <span style="color: #0000ff;">or</span> {loginRole} <span style="color: #0000ff;">in</span> (管理员)
<span style="color: #008080;">  4</span> <span style="color: #0000ff;">where</span> CreateUserID = ({loginUser} <span style="color: #0000ff;">and</span> {loginRole} <span style="color: #0000ff;">in</span> (测试)) <span style="color: #0000ff;">or</span> {loginRole} <span style="color: #0000ff;">in</span> (管理员) <span style="color: #0000ff;">or</span> ({loginUser}==test3 <span style="color: #0000ff;">and</span> 应用名称==XXX管理系统)
</pre>
                                        </div>
                                        <p><span style="font-size: medium;">这些一个一个的"条件"，简单理解为一个【数据规则】，通常会与原来我们前台的业务过滤条件合并再检索出数据。</span></p>
                                        <p><span style="font-size: medium;">每一个角色有不一样的【数据规则】，那么数据权限设计就变成</span></p>
                                        <p><span style="font-size: medium;">　　【资源】 - 【数据规则】</span></p>
                                        <p><span style="font-size: medium;">在数据库记录中存放为资源ID+规则的形式，如下：</span></p>
                                        <p><span style="font-size: medium;"><a href="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126223800563-138720379.jpg"><a class="lightbox-post" href="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126223801108-572329492.jpg"><img style="display: inline; background-image: none;" title="微信截图_20191126223141" src="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126223801108-572329492.jpg" alt="微信截图_20191126223141" width="698" height="134" border="0"></a></a></span></p>
                                        <p><span style="font-size: medium;">为了简化程序开发，在开发过程中可以做出以下约定：</span></p>
                                        <ul>
                                            <li><span style="font-size: medium;">所有需要进行数据权限控制功能的表，在设计时必须包含字段CreateUserId（创建用户Id)。</span></li>
                                            <li><span style="font-size: medium;"><span style="font-size: medium;">【资源】的名称限定为模块名称。如部门管理，用户管理，那么资源就是对应的部门列表，用户列表。</span></span></li>
                                            <li><span style="font-size: medium;"><span style="font-size: medium;"><span style="font-size: medium;">如果【资源】没有设置数据规则，那么视为该资源允许被任何主体查看。</span></span></span></li>
                                            <li><span style="font-size: medium;"><span style="font-size: medium;"><span style="font-size: medium;"><span style="font-size: medium;">数据规则中授权的对象限定为角色、用户。即不能设定为某个部门所有，如果想实现类似的功能，通过角色间接实现。例如：资源属于角色“开发组成员”，“开发组组长”。</span></span></span></span></li>
                                        </ul>
                                        <p><span style="font-size: medium;">权限控制总离不开一些条件的限制，如果没有完善的查询机制，那么在做权限条件过滤的时候你会觉得很别扭。马丁在<strong>《企业应用架构模式》第13章对象-关系元数据映射模式中提出查询对象模式(Query Object Pattern)</strong>。该模式核心结构如下：</span></p>
                                        <p><a href="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126225537377-1591536417.png"><a class="lightbox-post" href="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126225537871-692713107.png"><img style="display: inline; background-image: none;" title="下载" src="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126225537871-692713107.png" alt="下载" width="532" height="286" border="0"></a></a></p>
                                        <p><span style="font-size: medium;">该结构为【数据规则】的建立提供了理论基础。在设计数据权限的时候，可以照搬该思想。上面例子中的规则，数据规则展开如下：</span></p>
                                        <div class="cnblogs_code">
                                            <div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><a class="lightbox-post" href="//common.cnblogs.com/images/copycode.gif"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></a></span></div>
                                            <pre><span style="color: #008080;">  1</span> {
<span style="color: #008080;">  2</span> 	"<span style="color: #8b0000;">Operation</span>": "<span style="color: #8b0000;">or</span>",
<span style="color: #008080;">  3</span> 	"<span style="color: #8b0000;">Filters</span>": [{
<span style="color: #008080;">  4</span> 		"<span style="color: #8b0000;">Key</span>": "<span style="color: #8b0000;">{loginRole}</span>",
<span style="color: #008080;">  5</span> 		"<span style="color: #8b0000;">Value</span>": "<span style="color: #8b0000;">09ee2ffa-7463-4938-ae0b-1cb4e80c7c13</span>",
<span style="color: #008080;">  6</span> 		"<span style="color: #8b0000;">Contrast</span>": "<span style="color: #8b0000;">contains</span>",
<span style="color: #008080;">  7</span> 		"<span style="color: #8b0000;">Text</span>": "<span style="color: #8b0000;">管理员</span>"
<span style="color: #008080;">  8</span> 	}],
<span style="color: #008080;">  9</span> 	"<span style="color: #8b0000;">Children</span>": [{
<span style="color: #008080;"> 10</span> 		"<span style="color: #8b0000;">Operation</span>": "<span style="color: #8b0000;">and</span>",
<span style="color: #008080;"> 11</span> 		"<span style="color: #8b0000;">Filters</span>": [{
<span style="color: #008080;"> 12</span> 			"<span style="color: #8b0000;">Key</span>": "<span style="color: #8b0000;">{loginRole}</span>",
<span style="color: #008080;"> 13</span> 			"<span style="color: #8b0000;">Value</span>": "<span style="color: #8b0000;">0a7ebd0c-78d6-4fbc-8fbe-6fc25c3a932d</span>",
<span style="color: #008080;"> 14</span> 			"<span style="color: #8b0000;">Contrast</span>": "<span style="color: #8b0000;">contains</span>",
<span style="color: #008080;"> 15</span> 			"<span style="color: #8b0000;">Text</span>": "<span style="color: #8b0000;">测试</span>"
<span style="color: #008080;"> 16</span> 		}, {
<span style="color: #008080;"> 17</span> 			"<span style="color: #8b0000;">Key</span>": "<span style="color: #8b0000;">CreateUserId</span>",
<span style="color: #008080;"> 18</span> 			"<span style="color: #8b0000;">Value</span>": "<span style="color: #8b0000;">{loginUser}</span>",
<span style="color: #008080;"> 19</span> 			"<span style="color: #8b0000;">Contrast</span>": "<span style="color: #8b0000;">==</span>",
<span style="color: #008080;"> 20</span> 			"<span style="color: #8b0000;">Text</span>": ""
<span style="color: #008080;"> 21</span> 		}]
<span style="color: #008080;"> 22</span> 	}, {
<span style="color: #008080;"> 23</span> 		"<span style="color: #8b0000;">Operation</span>": "<span style="color: #8b0000;">and</span>",
<span style="color: #008080;"> 24</span> 		"<span style="color: #8b0000;">Filters</span>": [{
<span style="color: #008080;"> 25</span> 			"<span style="color: #8b0000;">Key</span>": "<span style="color: #8b0000;">AppName</span>",
<span style="color: #008080;"> 26</span> 			"<span style="color: #8b0000;">Value</span>": "<span style="color: #8b0000;">XXX管理平台</span>",
<span style="color: #008080;"> 27</span> 			"<span style="color: #8b0000;">Contrast</span>": "<span style="color: #8b0000;">==</span>",
<span style="color: #008080;"> 28</span> 			"<span style="color: #8b0000;">Text</span>": ""
<span style="color: #008080;"> 29</span> 		}, {
<span style="color: #008080;"> 30</span> 			"<span style="color: #8b0000;">Key</span>": "<span style="color: #8b0000;">{loginUser}</span>",
<span style="color: #008080;"> 31</span> 			"<span style="color: #8b0000;">Value</span>": "<span style="color: #8b0000;">229f3a49-ab27-49ce-b383-9f10ca23a9d5,1df68dfd-3b6d-4491-872f-00a0fc6c5a64</span>",
<span style="color: #008080;"> 32</span> 			"<span style="color: #8b0000;">Contrast</span>": "<span style="color: #8b0000;">in</span>",
<span style="color: #008080;"> 33</span> 			"<span style="color: #8b0000;">Text</span>": "<span style="color: #8b0000;">test3,test4</span>"
<span style="color: #008080;"> 34</span> 		}]
<span style="color: #008080;"> 35</span> 	}]
<span style="color: #008080;"> 36</span> }</pre>
                                            <div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><a class="lightbox-post" href="//common.cnblogs.com/images/copycode.gif"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></a></span></div>
                                        </div>
                                        <p><span style="font-size: medium;">规则分为三个部分：【分组】(Children)、【规则】(Filter)、【操作符】(and or)，而规则自身就是一个分组。这种简单的结构就可以满足全部的情况。看不懂啥意思？</span></p>
                                        <p><span style="font-size: medium;"><a href="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126225538344-422936844.jpg"><a class="lightbox-post" href="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126225538840-796951656.jpg"><img style="display: inline; background-image: none;" title="微信截图_20191125234345" src="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126225538840-796951656.jpg" alt="微信截图_20191125234345" width="713" height="465" border="0"></a></a></span></p>
                                        <p><span style="font-size: medium;">这样理解起来就比较简单了。</span></p>
                                        <p><span style="font-size: medium;"><a href="https://img2018.cnblogs.com/blog/42655/201911/42655-20191127003922116-775529443.jpg"><a class="lightbox-post" href="https://img2018.cnblogs.com/blog/42655/201911/42655-20191127003922556-1888307990.jpg"><img style="display: inline; background-image: none;" title="48ddd81b9850d6b30edb8c2534b6713c" src="https://img2018.cnblogs.com/blog/42655/201911/42655-20191127003922556-1888307990.jpg" alt="48ddd81b9850d6b30edb8c2534b6713c" width="207" height="224" border="0"></a></a></span></p>
                                        <p><span style="font-size: medium;">还不懂？？我们从简单的开始：</span></p>
                                        <h2><span style="font-size: 18pt;">数据权限实例--按角色</span> </h2>
                                        <p><span style="font-size: medium;">某一角色只能看到自己创建的信息。如：针对资源列表，我们设置了【测试】角色可以看到自己创建的资源。</span></p>
                                        <p><span style="font-size: medium;"><a href="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126225539230-1866619351.jpg"><a class="lightbox-post" href="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126225539633-33525062.jpg"><img style="display: inline; background-image: none;" title="微信截图_20191125231835" src="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126225539633-33525062.jpg" alt="微信截图_20191125231835" width="669" height="234" border="0"></a></a></span></p>
                                        <p><span style="font-size: medium;">这时如果用一个拥有测试角色的账号（test）登录，那么他只能看到自己创建的资源：</span></p>
                                        <p><span style="font-size: medium;"><a href="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126225540009-1545457216.jpg"><a class="lightbox-post" href="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126225540456-842213666.jpg"><img style="display: inline; background-image: none;" title="微信截图_20191125232012" src="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126225540456-842213666.jpg" alt="微信截图_20191125232012" width="666" height="343" border="0"></a></a></span></p>
                                        <p><span style="font-size: medium;">其他角色的账号登录时，会出现无法看到任何信息。我们稍做调整：【管理员】角色可以看到所有资源，【测试】角色只能看到自己创建的资源。</span></p>
                                        <p><span style="font-size: medium;"><a href="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126225540837-345533781.jpg"><a class="lightbox-post" href="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126225541265-440696140.jpg"><img style="display: inline; background-image: none;" title="微信截图_20191125233925" src="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126225541265-440696140.jpg" alt="微信截图_20191125233925" width="668" height="335" border="0"></a></a></span></p>
                                        <p><span style="font-size: medium;">这时如果用一个拥有管理员角色的账号（admin）登录，那么他就可以看到全部资源：</span></p>
                                        <p><span style="font-size: medium;"><a href="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126225541660-462090983.jpg"><a class="lightbox-post" href="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126225542121-895968833.jpg"><img style="display: inline; background-image: none;" title="微信截图_20191125233839" src="https://img2018.cnblogs.com/blog/42655/201911/42655-20191126225542121-895968833.jpg" alt="微信截图_20191125233839" width="650" height="448" border="0"></a></a></span></p>
                                        <p><span style="font-size: medium;">以此为基础，我们可以扩展非常复杂的数据权限控制。最终形成最后的复杂规则：【管理员】角色可以看到所有资源，【测试】角色只能看到自己创建的资源。账号test3/test4只能看到应用名称等于“XXX管理平台”的资源。</span></p>
                                        <h2><span style="font-size: 18pt;">数据权限实例--按部门</span> </h2>
                                        <p><span style="font-size: medium;"><a class="lightbox-post" href="https://img2020.cnblogs.com/blog/42655/202003/42655-20200322190514356-1849722811.png"><img src="https://img2020.cnblogs.com/blog/42655/202003/42655-20200322190514356-1849722811.png" alt="" width="665" height="243"></a></span></p>
                                        <p>&nbsp;</p>
                                        <p>管理员】可以看到所管辖部门的所有数据，其他角色只能看到自己的。</p>
                                        <h2>代码解析 </h2>
                                        <p><span style="font-size: medium;">可以在应用层基类BaseApp中，定义一个通用函数，根据当前即将访问的资源Id获取相应的访问【数据规则】，并把当前登录的用户信息注入到该规则中，最终转换成针对数据库的查询，如下：（不想看这个？直接跳过吧，看看如何使用也没有问题）</span></p>
                                        <div class="cnblogs_code">
                                            <div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><a class="lightbox-post" href="//common.cnblogs.com/images/copycode.gif"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></a></span></div>
                                            <pre><span style="color: #008080;">  1</span>         <span style="color: #0000ff;">protected</span> IQueryable&lt;T&gt; GetDataPrivilege(<span style="color: #0000ff;">string</span> parametername)
<span style="color: #008080;">  2</span>         {
<span style="color: #008080;">  3</span>             var loginUser = _auth.GetCurrentUser();
<span style="color: #008080;">  4</span>             <span style="color: #0000ff;">if</span> (loginUser.User.Account == Define.SYSTEM_USERNAME) <span style="color: #0000ff;">return</span> UnitWork.Find&lt;T&gt;(<span style="color: #0000ff;">null</span>);  <span style="color: #008000;">//超级管理员特权</span>
<span style="color: #008080;">  5</span> 
<span style="color: #008080;">  6</span>             var moduleName = <span style="color: #0000ff;">typeof</span>(T).Name;
<span style="color: #008080;">  7</span>             var rule = UnitWork.FindSingle&lt;DataPrivilegeRule&gt;(u =&gt; u.SourceCode == moduleName);
<span style="color: #008080;">  8</span>             <span style="color: #0000ff;">if</span> (rule == <span style="color: #0000ff;">null</span>) <span style="color: #0000ff;">return</span> UnitWork.Find&lt;T&gt;(<span style="color: #0000ff;">null</span>); <span style="color: #008000;">//没有设置数据规则，那么视为该资源允许被任何主体查看</span>
<span style="color: #008080;">  9</span>             <span style="color: #0000ff;">if</span> (rule.PrivilegeRules.Contains(Define.DATAPRIVILEGE_LOGINUSER) ||
<span style="color: #008080;"> 10</span>                                              rule.PrivilegeRules.Contains(Define.DATAPRIVILEGE_LOGINROLE))
<span style="color: #008080;"> 11</span>             {
<span style="color: #008080;"> 12</span> 
<span style="color: #008080;"> 13</span>                 <span style="color: #008000;">//即把{loginUser} =='xxxxxxx'换为 loginUser.User.Id =='xxxxxxx'，从而把当前登录的用户名与当时设计规则时选定的用户id对比</span>
<span style="color: #008080;"> 14</span>                 rule.PrivilegeRules = rule.PrivilegeRules.Replace(Define.DATAPRIVILEGE_LOGINUSER, loginUser.User.Id);
<span style="color: #008080;"> 15</span>                 var roles = loginUser.Roles.Select(u =&gt; u.Id).ToList();
<span style="color: #008080;"> 16</span>                 roles.Sort(); <span style="color: #008000;">//按字母排序,这样可以进行like操作</span>
<span style="color: #008080;"> 17</span>                 rule.PrivilegeRules = rule.PrivilegeRules.Replace(Define.DATAPRIVILEGE_LOGINROLE,
<span style="color: #008080;"> 18</span>                     <span style="color: #0000ff;">string</span>.Join(',',roles));
<span style="color: #008080;"> 19</span>             }
<span style="color: #008080;"> 20</span>             <span style="color: #0000ff;">return</span> UnitWork.Find&lt;T&gt;(<span style="color: #0000ff;">null</span>).GenerateFilter(parametername,
<span style="color: #008080;"> 21</span>                 JsonHelper.Instance.Deserialize&lt;FilterGroup&gt;(rule.PrivilegeRules));
<span style="color: #008080;"> 22</span>         }</pre>
                                            <div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><a class="lightbox-post" href="//common.cnblogs.com/images/copycode.gif"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></a></span></div>
                                        </div>
                                        <p><span style="font-size: medium;">这样在我们自己的应用中，使用上面的函数创建一个基础查询，再加上自定义的查询条件即可轻松实现数据权限的控制。</span></p>
                                        <div class="cnblogs_code">
                                            <div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><a class="lightbox-post" href="//common.cnblogs.com/images/copycode.gif"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></a></span></div>
                                            <pre><span style="color: #008080;">  1</span>             var result = <span style="color: #0000ff;">new</span> TableData();
<span style="color: #008080;">  2</span>             var objs = GetDataPrivilege("<span style="color: #8b0000;">u</span>");
<span style="color: #008080;">  3</span>             <span style="color: #0000ff;">if</span> (!<span style="color: #0000ff;">string</span>.IsNullOrEmpty(request.key))
<span style="color: #008080;">  4</span>             {
<span style="color: #008080;">  5</span>                 objs = objs.Where(u =&gt; u.Id.Contains(request.key));
<span style="color: #008080;">  6</span>             }
<span style="color: #008080;">  7</span> 
<span style="color: #008080;">  8</span>             result.data = objs.OrderBy(u =&gt; u.Id)
<span style="color: #008080;">  9</span>                 .Skip((request.page - 1) * request.limit)
<span style="color: #008080;"> 10</span>                 .Take(request.limit);</pre>
                                            <div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><a class="lightbox-post" href="//common.cnblogs.com/images/copycode.gif"><img src="//common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></a></span></div>
                                        </div>
                                        <h2>最后 </h2>
                                        <p><span style="font-size: medium;">以上所有代码均已实现并开源（配置数据规则的界面可以自己画，layui的前端画起来实在太费力），</span><a href="https://gitee.com/yubaolee/OpenAuth.Core" target="_blank">OpenAuth.Core</a><span style="font-size: medium;">秉承代码之美，为.net core添砖加瓦，喜欢的star一下！</span></p>
                                        <p>&nbsp;</p>
                                        <p><span style="font-size: medium;">&nbsp;</span></p>
                                        <div id="post-signature">
                                            <p>本文作者：李玉宝</p>
                                            <p>本文链接：https://www.cnblogs.com/yubaolee/p/DataPrivilege.html</p>
                                            <p>版权声明：本博客所有文章除特别声明外均为原创，采用 <a href="">CC BY-NC-SA 4.0</a> 许可协议。转载请在明显位置注明原文链接和作者等相关信息，明确指出修改（如有），并通过 E-mail 等方式告知，谢谢合作！</p>

                                        </div>
                                    </div>
                                    <div id="MySignature" style="display: block;">
                                        <style type="text/css">
                                            #cppDiv {
                                                background: url("http://www.cnblogs.com/images/cnblogs_com/Terrylee/147338/o_info.png") no-repeat scroll 1% 50% #E5F1F4;
                                                border-color: #E0E0E0;
                                                border-style: dashed;
                                                border-width: 1px;
                                                font-family: 微软雅黑;
                                                font-size: 11px;
                                                padding: 10px 10px 10px 60px
                                            }

                                            #cppDiv div {
                                                line-height: 25px
                                            }

                                        </style>
                                        <div id="cppDiv">

                                            作者：<a href="http://www.cnblogs.com/yubaolee">李玉宝</a>（李玉宝的代码人生）<br>
                                            出处：<a href="http://www.cnblogs.com/yubaolee">http://www.cnblogs.com/yubaolee/ </a><br>
                                            开源框架：<a href="http://www.openauth.me/" target="blank">最好用的的权限工作流框架OpenAuth.Net</a><br>
                                            本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/2.5/cn/">知识共享署名-非商业性使用-禁止演绎 2.5 中国大陆许可协议</a>进行许可。<br>

                                            如您有任何疑问或者授权方面的协商，请<a href="http://space.cnblogs.com/msg/send/yubaolee">给我留言</a>。</div>
                                    </div>
                                    <div class="clear"></div>
                                    <div id="blog_post_info_block">
                                        <div id="EntryTag">
                                            标签:
                                            , </div>

                                        <div id="blog_post_info">
                                            <div id="green_channel">
                                                <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(11893151,cb_blogId,1);green_channel_success(this,'谢谢推荐！');">好文要顶</a>
                                                <a id="green_channel_follow" href="javascript:void(0);">已关注</a>
                                                <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
                                                <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="https://common.cnblogs.com/images/icon_weibo_24.png" alt=""></a>
                                                <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="https://common.cnblogs.com/images/wechat.png" alt=""></a>
                                            </div>
                                            <div id="author_profile">
                                                <div id="author_profile_info" class="author_profile_info">
                                                    <a href="https://home.cnblogs.com/u/yubaolee/" target="_blank"><img src="https://pic.cnblogs.com/face/42655/20180425171005.png" class="author_avatar" alt=""></a>
                                                    <div id="author_profile_detail" class="author_profile_info">
                                                        <a href="https://home.cnblogs.com/u/yubaolee/">李玉宝</a><br>
                                                        <a href="https://home.cnblogs.com/u/yubaolee/followees/">关注 - 62</a><br>
                                                        <a href="https://home.cnblogs.com/u/yubaolee/followers/">粉丝 - 1267</a>
                                                    </div>
                                                </div>
                                                <div class="clear"></div>
                                                <div id="author_profile_honor"></div>
                                                <div id="author_profile_follow">
                                                    我在关注他 <a href="javascript:void(0);" onclick="unfollow('68fb460b-63cf-dd11-9e4d-001cf0cd104b');return false;">取消关注</a>
                                                </div>
                                            </div>
                                            <div id="div_digg">
                                                <div class="diggit" onclick="votePost(11893151,'Digg')">
                                                    <span class="diggnum" id="digg_count">32</span>
                                                </div>
                                                <div class="buryit" onclick="votePost(11893151,'Bury')">
                                                    <span class="burynum" id="bury_count">1</span>
                                                </div>
                                                <div class="clear"></div>
                                                <div class="diggword" id="digg_tips">
                                                </div>
                                            </div>

                                            <script type="text/javascript">
                                                currentDiggType = 0;

                                            </script>
                                        </div>
                                        <div class="clear"></div>
                                        <div id="post_next_prev">

                                            <a href="https://www.cnblogs.com/yubaolee/p/10398633.html" class="p_n_p_prefix">« </a> 上一篇： <a href="https://www.cnblogs.com/yubaolee/p/10398633.html" title="发布于 2019-02-25 08:43">仅此一文让你明白事务隔离级别、脏读、不可重复读、幻读</a>

                                        </div>
                                    </div>
                                </div>
                                <div class="postDesc">posted @
                                    <span id="post-date">2019-11-27 07:42</span>&nbsp;
                                    <a href="https://www.cnblogs.com/yubaolee/">李玉宝</a>&nbsp;
                                    阅读(<span id="post_view_count">4356</span>)&nbsp;
                                    评论(<span id="post_comment_count">24</span>)&nbsp;
                                    <a href="https://i.cnblogs.com/EditPosts.aspx?postid=11893151" rel="nofollow">编辑</a>&nbsp;
                                    <a href="javascript:void(0)" onclick="AddToWz(11893151);return false;">收藏</a></div>
                            </div>
                        </div>
                        <a name="!comments"></a>
                        <div id="blog-comments-placeholder"></div>
                        <div id="comment_form" class="commentform">
                            <a name="commentform"></a>
                            <div id="divCommentShow"></div>
                            <div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="https://www.cnblogs.com/guangzanassistant/p/12380553.html#" onclick="return RefreshPage();">刷新页面</a><a href="https://www.cnblogs.com/guangzanassistant/p/12380553.html#top">返回顶部</a></div>
                            <div id="comment_form_container" style="visibility: visible;">
                                <div id="commentform_title">发表评论</div>
                                <span id="tip_comment" style="color:Red"></span>
                                <div class="commentbox_main
                                    comment_textarea">
                                    <div class="commentbox_title">
                                        <div class="commentbox_title_left">
                                            <span id="btn_edit_comment" class="commentbox_tab
                                                active" title="编辑评论">编辑</span>
                                            <span id="btn_preview_comment" class="commentbox_tab" title="Markdown 预览">预览</span>
                                        </div>
                                        <div class="commentbox_title_right">
                                            <span id="ubb_bold" class="comment_icon" alt="粗体" title="添加粗体(Ctrl +
                                                B)">
                                                <svg class="comment_svg" version="1.1" viewBox="0
                                                    0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                    <g fill-rule="evenodd">
                                                        <path d="m13.221
                                                            19c1.4414 0
                                                            2.5793-0.27451
                                                            3.3759-0.82353
                                                            0.92931-0.66667
                                                            1.4034-1.7059
                                                            1.4034-3.1176
                                                            0-0.94118-0.22759-1.7059-0.66379-2.2549-0.45517-0.56863-1.119-0.94118-2.0103-1.1176
                                                            0.68276-0.27451
                                                            1.1948-0.64706
                                                            1.5552-1.1569
                                                            0.36034-0.54902
                                                            0.55-1.2157
                                                            0.55-2
                                                            0-1.0588-0.36034-1.902-1.0621-2.5294-0.75862-0.66667-1.8207-1-3.1672-1h-6.2017v14h6.2207zm-0.82196-8h-3.3987v-4h3.4367c0.91139
                                                            0 1.557 0.15686
                                                            1.9747 0.47059
                                                            0.37975 0.29412
                                                            0.58861 0.78431
                                                            0.58861 1.451 0
                                                            0.72549-0.20886
                                                            1.2549-0.58861
                                                            1.5882-0.39873
                                                            0.31373-1.0633
                                                            0.4902-2.0127
                                                            0.4902zm0.52612
                                                            6h-3.9249v-4h3.9855c1.052
                                                            0 1.8208 0.16216
                                                            2.3064 0.48649
                                                            0.46532 0.32432
                                                            0.70809 0.84685
                                                            0.70809 1.5856 0
                                                            0.72072-0.3237
                                                            1.2252-0.9711
                                                            1.5495-0.50578
                                                            0.25225-1.2139
                                                            0.37838-2.104
                                                            0.37838z" fill-rule="nonzero" stroke-width=".35"></path>
                                                    </g>
                                                </svg>
                                            </span>
                                            <span id="ubb_url" class="comment_icon" title="添加链接(Ctrl + L)" alt="链接">
                                                <svg class="comment_svg
                                                    comment_svg_stroke" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                    <g fill-rule="evenodd">
                                                        <g transform="translate(4
                                                            4)" fill-rule="nonzero" stroke-width=".4">
                                                            <path d="m6.304
                                                                9.696c-0.288-0.288-0.512-0.608-0.704-0.992-0.16-0.32-0.032-0.704
                                                                0.288-0.864
                                                                0.32-0.16
                                                                0.704-0.032
                                                                0.864 0.288
                                                                0.128 0.224
                                                                0.256 0.448
                                                                0.448 0.64
                                                                0.928 0.928
                                                                2.432 0.928
                                                                3.36
                                                                0l3.36-3.328c0.928-0.928
                                                                0.928-2.432
                                                                0-3.36s-2.432-0.928-3.36
                                                                0l-2.272
                                                                2.272c-0.256
                                                                0.256-0.64
                                                                0.256-0.896
                                                                0-0.256-0.256-0.256-0.64
                                                                0-0.896l2.272-2.272c1.44-1.44
                                                                3.744-1.44
                                                                5.184 0 1.44
                                                                1.44 1.44
                                                                3.744 0
                                                                5.184l-3.36
                                                                3.296c-0.704
                                                                0.704-1.632
                                                                1.088-2.592
                                                                1.088-0.928
                                                                0-1.856-0.352-2.592-1.056z"></path>
                                                            <path d="m3.776
                                                                15.808c-0.992
                                                                0-1.888-0.384-2.592-1.056-1.44-1.44-1.44-3.744
                                                                0-5.184l3.328-3.328c1.44-1.44
                                                                3.744-1.44
                                                                5.184 0
                                                                0.288 0.288
                                                                0.544 0.64
                                                                0.736 1.024
                                                                0.16 0.32 0
                                                                0.704-0.32
                                                                0.864-0.32
                                                                0.16-0.704
                                                                0-0.864-0.32-0.128-0.256-0.288-0.48-0.48-0.672-0.928-0.928-2.432-0.928-3.36
                                                                0l-3.296
                                                                3.328c-0.928
                                                                0.928-0.928
                                                                2.432 0 3.36
                                                                0.448 0.448
                                                                1.056 0.704
                                                                1.664 0.704
                                                                0.608 0
                                                                1.248-0.256
                                                                1.664-0.704l2.112-2.112c0.256-0.256
                                                                0.64-0.256
                                                                0.896
                                                                0s0.256 0.64
                                                                0
                                                                0.896l-2.112
                                                                2.112c-0.672
                                                                0.704-1.568
                                                                1.088-2.56
                                                                1.088z"></path>
                                                        </g>
                                                    </g>
                                                </svg>
                                            </span>
                                            <span id="ubb_code" class="comment_icon" title="添加代码(Ctrl + `)" alt="代码">
                                                <svg class="comment_svg
                                                    comment_svg_stroke" version="1.1" viewBox="0
                                                    0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                    <g fill-rule="evenodd">
                                                        <g transform="translate(16
                                                            6)" stroke-linecap="round" stroke-width="2">
                                                            <line x1=".5" x2="4.5" y1=".7" y2="6.3"></line>
                                                            <line transform="translate(2.5
                                                                9.1) scale(1
                                                                -1)
                                                                translate(-2.5
                                                                -9.1)" x1=".5" x2="4.5" y1="6.3" y2="11.9"></line>
                                                        </g>
                                                        <g transform="translate(3
                                                            6.1)" stroke-linecap="round" stroke-width="2">
                                                            <line transform="translate(2.5
                                                                3.5)
                                                                scale(-1 1)
                                                                translate(-2.5
                                                                -3.5)" x1=".5" x2="4.5" y1=".7" y2="6.3"></line>
                                                            <line transform="translate(2.5
                                                                9.1)
                                                                scale(-1)
                                                                translate(-2.5
                                                                -9.1)" x1=".5" x2="4.5" y1="6.3" y2="11.9"></line>
                                                        </g>
                                                        <path transform="translate(12
                                                            12.5) scale(1
                                                            -1)
                                                            translate(-12
                                                            -12.5)" d="m10.778
                                                            7.1249c0.50008-0.11366
                                                            0.9978 0.16911
                                                            1.1643
                                                            0.64128l0.032406
                                                            0.11223 2
                                                            8.8c0.1224
                                                            0.53855-0.21496
                                                            1.0744-0.75351
                                                            1.1968-0.50008
                                                            0.11366-0.9978-0.16911-1.1643-0.64128l-0.032406-0.11223-2-8.8c-0.1224-0.53855
                                                            0.21496-1.0744
                                                            0.75351-1.1968z" fill-rule="nonzero" stroke-width=".25"></path>
                                                    </g>
                                                </svg>
                                            </span>
                                            <span id="ubb_quote" class="comment_icon" title="添加引用(Ctrl + Q)" alt="引用">
                                                <svg class="comment_svg" version="1.1" viewBox="0
                                                    0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                    <g fill-rule="evenodd">
                                                        <g transform="translate(5
                                                            4)" fill-rule="nonzero" stroke-width=".25">
                                                            <path d="m5.0013
                                                                15v-5.2702h-2.8008c-0.13413-3.3762
                                                                1.2004-6.2143
                                                                4.0009-8.5135l-1.2-1.2163c-3.335
                                                                2.2996-5.0013
                                                                5.8119-5.0013
                                                                10.54v4.4595h5.0013-1.285e-5zm8.7987
                                                                0v-5.2702h-2.8008c-0.13453-3.3762
                                                                1.2-6.2143
                                                                4.0009-8.5135l-1.2-1.2163c-3.335
                                                                2.2996-5.0013
                                                                5.8119-5.0013
                                                                10.54v4.4595h5.0013-1.28e-5z"></path>
                                                        </g>
                                                    </g>
                                                </svg>
                                            </span>
                                            <span id="ubb_img" class="comment_icon" alt="图片" title="上传图片(Ctrl +
                                                I)">
                                                <svg class="comment_svg" version="1.1" viewBox="0
                                                    0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                    <g fill-rule="evenodd">
                                                        <g transform="translate(3
                                                            3.8)" fill-rule="nonzero">
                                                            <path d="m14.1
                                                                0.58235h-11.2c-1.32
                                                                0-2.4
                                                                1.0482-2.4
                                                                2.3294v10.871c0
                                                                1.2812 1.08
                                                                2.3294 2.4
                                                                2.3294h11.2c1.32
                                                                0 2.4-1.0482
                                                                2.4-2.3294v-10.871c0-1.2812-1.08-2.3294-2.4-2.3294zm0.7
                                                                13.569-3.63-3.4165
                                                                1.33-1.2909c0.21-0.20382
                                                                0.59-0.20382
                                                                0.8 0l1.6
                                                                1.5529v2.7856c0
                                                                0.13588-0.04
                                                                0.26206-0.1
                                                                0.36882zm-11.9-12.016h11.2c0.44
                                                                0 0.8
                                                                0.34941 0.8
                                                                0.77647v5.8915l-0.47-0.45618c-0.84-0.825-2.22-0.825-3.07
                                                                0l-1.35
                                                                1.3103-2.39-2.2421c-0.85-0.825-2.22-0.825-3.05-0.019412l-2.48
                                                                2.2615v-6.7456c0.01-0.42706
                                                                0.37-0.77647
                                                                0.81-0.77647zm-0.8
                                                                11.647v-1.9897l3.6-3.2806c0.21-0.20382
                                                                0.58-0.21353
                                                                0.81
                                                                0.0097059l6.43
                                                                6.0371h-10.04c-0.44
                                                                0-0.8-0.33971-0.8-0.77647z"></path>
                                                            <ellipse cx="10.5" cy="6.4059" rx="1" ry="1"></ellipse>
                                                        </g>
                                                    </g>
                                                </svg>
                                            </span>
                                        </div>
                                    </div>
                                    <div style="display:none">
                                        <span id="comment_edit_id"></span>
                                        <span id="span_parentcomment_id"></span>
                                        <span id="span_parent_id"></span>
                                        <span id="span_comment_replyto"></span>
                                        <span id="span_comment_posted"></span>
                                        <span id="span_current_user_id">8a1d5911-2fd3-40d4-1799-08d6ae5bbb5c</span>
                                    </div>
                                    <textarea id="tbCommentBody" placeholder="支持 Markdown"></textarea>
                                    <div id="tbCommentBodyPreview" class="feedbackCon" style="display:
                                        none">
                                        <div id="tbCommentBodyPreviewBody" class="blog_comment_body
                                            comment_preview
                                            cnblogs-markdown"></div>
                                    </div>
                                    <div class="commentbox_footer">
                                        <a class="comment_option">Markdown
                                            帮助</a>
                                        <span id="btn_comment_options" class="comment_option">
                                            <input id="ubb_auto_completion" class="inline_middle" type="checkbox">
                                            <label class="inline_middle" for="ubb_auto_completion">自动补全</label>
                                        </span>
                                    </div>
                                </div>
                                <p id="commentbox_opt">
                                    <input id="btn_comment_submit" type="button" class="comment_btn" title="提交评论(Ctrl + Enter)" value="提交评论">
                                    <span id="span_comment_canceledit" style="display:none"><a href="javascript:void(0);" onclick="return
                                            CancelCommentEdit()">不改了</a></span>
                                    <a href="javascript:void(0);" onclick="return logout();">退出</a>
                                </p>
                                <div id="tip_comment2" style="color:Red"></div>
                                <p>[Ctrl+Enter快捷键提交]</p>
                            </div>
                            <div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
                            <div id="ad_t2"><a href="http://www.ucancode.com/index.htm" target="_blank">【推荐】超50万行VC++源码:
                                    大型组态工控、电力仿真CAD与GIS源码库</a><br>
                                <a href="https://cloud.tencent.com/act/seckill?fromSource=gwzcw.3498755.3498755.3498755&amp;utm_medium=cpc&amp;utm_id=gwzcw.3498755.3498755.3498755" target="_blank">【推荐】腾讯云产品限时秒杀，爆款1核2G云服务器99元/年！</a><br>
                            </div>
                            <div id="opt_under_post"></div>
                            <div id="cnblogs_c1" class="c_ad_block">
                                <div id="div-gpt-ad-1546353474406-0" style="height:250px; width:300px;" data-google-query-id="CLaoxcvTzugCFZUIXAod6LwDbw">
                                    <div id="google_ads_iframe_/1090369/C1_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C1_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C1_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px;
                                            vertical-align: bottom;" data-google-container-id="1" data-load-complete="true" src=""></iframe></div>
                                </div>
                            </div>
                            <div id="under_post_news">
                                <div class="recomm-block"><b>相关博文：</b><br>·
                                    <a title="Markdown教程（精简了菜鸟教程）" href="https://www.cnblogs.com/zry20200217/p/12331695.html" target="_blank" onclick="clickRecomItmem(12331695)">Markdown教程（精简了菜鸟教程）</a><br>·
                                    <a title="MarkdownLearningNotes" href="https://www.cnblogs.com/biaogejiushibiao/p/11718815.html" target="_blank" onclick="clickRecomItmem(11718815)">MarkdownLearningNotes</a><br>·
                                    <a title="一篇文章讲清楚markdown" href="https://www.cnblogs.com/caoleiCoding/p/markdown.html" target="_blank" onclick="clickRecomItmem(12358686)">一篇文章讲清楚markdown</a><br>·
                                    <a title="Markdown教程" href="https://www.cnblogs.com/Golanguage/p/12287376.html" target="_blank" onclick="clickRecomItmem(12287376)">Markdown教程</a><br>·
                                    <a title="Markdown速学笔记" href="https://www.cnblogs.com/momoon/p/12314066.html" target="_blank" onclick="clickRecomItmem(12314066)">Markdown速学笔记</a><br>»
                                    <a target="_blank" href="https://recomm.cnblogs.com/blogpost/12380553">更多推荐...</a></div>
                            </div>
                            <div id="cnblogs_c2" class="c_ad_block">
                                <div id="div-gpt-ad-1539008685004-0" style="height:60px; width:468px;" data-google-query-id="CICpxsvTzugCFZUIXAod6LwDbw">
                                    <div id="google_ads_iframe_/1090369/C2_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C2_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C2_0" width="468" height="60" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px;
                                            vertical-align: bottom;" data-google-container-id="2" data-load-complete="true" src=""></iframe></div>
                                </div>
                            </div>
                            <div id="under_post_kb">
                                <div class="itnews c_ad_block">
                                    <b>最新 IT 新闻</b>:
                                    <br>
                                    · <a href="https://news.cnblogs.com/n/659072/" target="_blank">门店爆单、加盟商控诉：瑞幸制造的恐慌正在蔓延</a>
                                    <br>
                                    · <a href="https://news.cnblogs.com/n/659073/" target="_blank">中国MCN出海记：几千块就能签一个粉丝百万的网红？</a>
                                    <br>
                                    · <a href="https://news.cnblogs.com/n/659065/" target="_blank">月入2万的中国程序员，撑起Zoom千亿市值</a>
                                    <br>
                                    · <a href="https://news.cnblogs.com/n/659077/" target="_blank">瑞幸的男人们毫无悔意</a>
                                    <br>
                                    · <a href="https://news.cnblogs.com/n/659076/" target="_blank">Firefox 修复两项 0 day
                                        漏洞，建议用户尽快升级</a>
                                    <br>
                                    » <a href="https://news.cnblogs.com/" title="IT 新闻" target="_blank">更多新闻...</a>
                                </div>
                            </div>
                            <div id="HistoryToday" class="c_ad_block"></div>
                        </div>
                    </div>
                    <!--end: forFlow -->
                </div>
            </div>
            <div id="sideBar">
                <div id="sideBarMain">
                    <div id="sidebar_news" class="newsItem">
                        <h3 class="catListTitle">公告</h3>
                        <div id="blog-news">
                            <div id="profile_block">
                                昵称：
                                <a href="https://home.cnblogs.com/u/guangzanassistant/">
                                    已注销用户456123
                                </a>
                                <br>
                                园龄：
                                <a href="https://home.cnblogs.com/u/guangzanassistant/" title="入园时间：2019-03-22">
                                    1年
                                </a>
                                <br>
                                粉丝：
                                <a href="https://home.cnblogs.com/u/guangzanassistant/followers/">
                                    0
                                </a>
                                <br>
                                关注：
                                <a href="https://home.cnblogs.com/u/guangzanassistant/followees/">
                                    2
                                </a>
                                <div id="p_b_follow"></div>
                            </div>
                        </div>

                    </div>
                    <div id="blog-calendar">
                        <table id="blogCalendar" class="Cal" cellspacing="0" cellpadding="0" title="Calendar" border="0">
                            <tbody>
                                <tr>
                                    <td colspan="7">
                                        <table class="CalTitle" cellspacing="0" border="0">
                                            <tbody>
                                                <tr>
                                                    <td class="CalNextPrev">
                                                        <a href="javascript:void(0);">&lt;</a>
                                                    </td>
                                                    <td align="center">2020年4月</td>
                                                    <td align="right" class="CalNextPrev">
                                                        <a href="javascript:void(0);">&gt;</a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                                <tr>
                                    <th class="CalDayHeader" align="center" abbr="日" scope="col">日</th>
                                    <th class="CalDayHeader" align="center" abbr="一" scope="col">一</th>
                                    <th class="CalDayHeader" align="center" abbr="二" scope="col">二</th>
                                    <th class="CalDayHeader" align="center" abbr="三" scope="col">三</th>
                                    <th class="CalDayHeader" align="center" abbr="四" scope="col">四</th>
                                    <th class="CalDayHeader" align="center" abbr="五" scope="col">五</th>
                                    <th class="CalDayHeader" align="center" abbr="六" scope="col">六</th>
                                </tr>
                                <tr>
                                    <td class="CalOtherMonthDay" align="center">29</td>
                                    <td class="CalOtherMonthDay" align="center">30</td>
                                    <td class="CalOtherMonthDay" align="center">31</td>
                                    <td class="" align="center">
                                        1
                                    </td>
                                    <td class="" align="center">
                                        2
                                    </td>
                                    <td class="" align="center">
                                        3
                                    </td>
                                    <td class="CalTodayDay" align="center">
                                        4
                                    </td>
                                </tr>
                                <tr>
                                    <td class="CalWeekendDay" align="center">
                                        5
                                    </td>
                                    <td class="" align="center">
                                        6
                                    </td>
                                    <td class="" align="center">
                                        7
                                    </td>
                                    <td class="" align="center">
                                        8
                                    </td>
                                    <td class="" align="center">
                                        9
                                    </td>
                                    <td class="" align="center">
                                        10
                                    </td>
                                    <td class="CalWeekendDay" align="center">
                                        11
                                    </td>
                                </tr>
                                <tr>
                                    <td class="CalWeekendDay" align="center">
                                        12
                                    </td>
                                    <td class="" align="center">
                                        13
                                    </td>
                                    <td class="" align="center">
                                        14
                                    </td>
                                    <td class="" align="center">
                                        15
                                    </td>
                                    <td class="" align="center">
                                        16
                                    </td>
                                    <td class="" align="center">
                                        17
                                    </td>
                                    <td class="CalWeekendDay" align="center">
                                        18
                                    </td>
                                </tr>
                                <tr>
                                    <td class="CalWeekendDay" align="center">
                                        19
                                    </td>
                                    <td class="" align="center">
                                        20
                                    </td>
                                    <td class="" align="center">
                                        21
                                    </td>
                                    <td class="" align="center">
                                        22
                                    </td>
                                    <td class="" align="center">
                                        23
                                    </td>
                                    <td class="" align="center">
                                        24
                                    </td>
                                    <td class="CalWeekendDay" align="center">
                                        25
                                    </td>
                                </tr>
                                <tr>
                                    <td class="CalWeekendDay" align="center">
                                        26
                                    </td>
                                    <td class="" align="center">
                                        27
                                    </td>
                                    <td class="" align="center">
                                        28
                                    </td>
                                    <td class="" align="center">
                                        29
                                    </td>
                                    <td class="" align="center">
                                        30
                                    </td>
                                    <td class="CalOtherMonthDay" align="center">
                                        1
                                    </td>
                                    <td class="CalOtherMonthDay" align="center">
                                        2
                                    </td>
                                </tr>
                                <tr>
                                    <td class="CalOtherMonthDay" align="center">
                                        3
                                    </td>
                                    <td class="CalOtherMonthDay" align="center">
                                        4
                                    </td>
                                    <td class="CalOtherMonthDay" align="center">
                                        5
                                    </td>
                                    <td class="CalOtherMonthDay" align="center">
                                        6
                                    </td>
                                    <td class="CalOtherMonthDay" align="center">
                                        7
                                    </td>
                                    <td class="CalOtherMonthDay" align="center">
                                        8
                                    </td>
                                    <td class="CalOtherMonthDay" align="center">
                                        9
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="leftcontentcontainer">
                        <div id="blog-sidecolumn">
                            <!-- 搜索 -->
                            <div id="sidebar_search" class="sidebar-block">
                                <div id="sidebar_search" class="mySearch">
                                    <h3 class="catListTitle">搜索</h3>
                                    <div id="sidebar_search_box">
                                        <div id="widget_my_zzk" class="div_my_zzk">
                                            <input type="text" id="q" onkeydown="return
                                                    zzk_go_enter(event);" class="input_my_zzk">&nbsp;<input onclick="zzk_go()" type="button" value="找找看" id="btnZzk" class="btn_my_zzk">
                                        </div>
                                        <div id="widget_my_google" class="div_my_zzk">
                                            <input type="text" name="google_q" id="google_q" onkeydown="return
                                                    google_go_enter(event);" class="input_my_zzk">&nbsp;<input onclick="google_go()" type="button" value="谷歌搜索" class="btn_my_zzk">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 常用链接 -->
                            <div id="sidebar_shortcut" class="sidebar-block">
                                <div class="catListLink">
                                    <h3 class="catListTitle">
                                        常用链接
                                    </h3>
                                    <ul>
                                        <li>

                                            <a href="https://www.cnblogs.com/guangzanassistant/p/" title="我的博客的随笔列表">我的随笔</a>
                                        </li>
                                        <li>

                                            <a href="https://www.cnblogs.com/guangzanassistant/MyComments.html" title="我的发表过的评论列表">我的评论</a>
                                        </li>
                                        <li>

                                            <a href="https://www.cnblogs.com/guangzanassistant/OtherPosts.html" title="我评论过的随笔列表">我的参与</a>
                                        </li>
                                        <li>

                                            <a href="https://www.cnblogs.com/guangzanassistant/RecentComments.html" title="我的博客的评论列表">最新评论</a>
                                        </li>
                                        <li>

                                            <a href="https://www.cnblogs.com/guangzanassistant/tag/" title="我的博客的标签列表">我的标签</a>
                                        </li>

                                    </ul>
                                    <div id="itemListLin_con" style="display:none;">
                                        <ul>

                                        </ul>
                                    </div>
                                </div>


                            </div>

                            <!-- 最新随笔 -->
                            <div id="sidebar_recentposts" class="sidebar-block">
                                <div class="catListEssay">
                                    <h3 class="catListTitle">最新随笔</h3>
                                    <ul>
                                        <li>


                                            <a href="https://www.cnblogs.com/guangzanassistant/p/12380553.html">1.awescnb
                                                test1</a>

                                        </li>
                                        <li>


                                            <a href="https://www.cnblogs.com/guangzanassistant/p/12064754.html">2.测试</a>
                                        </li>
                                        <li>


                                            <a href="https://www.cnblogs.com/guangzanassistant/p/11910978.html">3.45345654</a>
                                        </li>


                                    </ul>
                                </div>


                            </div>


                            <!-- 我的标签 -->
                            <div id="sidebar_toptags" class="sidebar-block">
                                <div class="catListTag">
                                    <h3 class="catListTitle">我的标签</h3>
                                    <ul>

                                        <li>
                                            <a href="https://www.cnblogs.com/guangzanassistant/tag/awescnb/">awescnb</a>(1)
                                        </li>
                                        <li>
                                            <a href="https://www.cnblogs.com/guangzanassistant/tag/test/">test</a>(1)
                                        </li>
                                        <li>
                                            <a href="https://www.cnblogs.com/guangzanassistant/tag/">更多</a>
                                        </li>

                                    </ul>
                                </div>


                            </div>

                            <!-- 积分与排名 -->
                            <div id="sidebar_scorerank" class="sidebar-block">
                                <div class="catListBlogRank">
                                    <h3 class="catListTitle">积分与排名</h3>
                                    <ul>
                                        <li class="liScore">
                                            积分 -
                                            448
                                        </li>
                                        <li class="liRank">
                                            排名 -
                                            234726
                                        </li>
                                    </ul>
                                </div>




                            </div>

                            <!-- 随笔分类、随笔档案、文章分类、新闻分类、相册、链接 -->
                            <div id="sidebar_categories">

                                <div id="sidebar_postcategory" class="catListPostCategory
                                        sidebar-block">
                                    <h3 class="catListTitle">


                                        随笔分类



                                    </h3>


                                    <ul>

                                        <li>

                                            <a href="https://www.cnblogs.com/guangzanassistant/category/1605656.html" rel="" target="">
                                                测试1(2)
                                            </a>


                                        </li>

                                    </ul>


                                </div>
                                <div id="sidebar_postarchive" class="catListPostArchive
                                        sidebar-block">
                                    <h3 class="catListTitle">


                                        随笔档案



                                    </h3>


                                    <ul>

                                        <li>

                                            <a href="https://www.cnblogs.com/guangzanassistant/archive/2020/02.html" rel="" target="">
                                                2020年2月(1)
                                            </a>


                                        </li>
                                        <li>

                                            <a href="https://www.cnblogs.com/guangzanassistant/archive/2019/12.html" rel="" target="">
                                                2019年12月(1)
                                            </a>


                                        </li>
                                        <li>

                                            <a href="https://www.cnblogs.com/guangzanassistant/archive/2019/11.html" rel="" target="">
                                                2019年11月(2)
                                            </a>


                                        </li>

                                    </ul>


                                </div>

                            </div>

                            <!-- 最新评论 -->
                            <div id="sidebar_recentcomments" class="sidebar-block">
                                <div class="catListComment">
                                    <h3 class="catListTitle">最新评论</h3>
                                    <div class="RecentCommentBlock">
                                        <ul>
                                            <li class="recent_comment_title"><a href="https://www.cnblogs.com/guangzanassistant/p/12064754.html">1.
                                                    Re:测试</a></li>
                                            <li class="recent_comment_body">111</li>
                                            <li class="recent_comment_author">--已注销用户456123</li>
                                        </ul>
                                    </div>
                                </div>


                            </div>



                            <!-- 阅读排行榜 -->
                            <div id="sidebar_topviewedposts" class="sidebar-block">
                                <div class="catListView">
                                    <h3 class="catListTitle">阅读排行榜</h3>
                                    <div id="TopViewPostsBlock">
                                        <ul style="word-break:break-all">
                                            <li>
                                                <a href="https://www.cnblogs.com/guangzanassistant/p/12064754.html">
                                                    1. 测试(71)
                                                </a>
                                            </li>
                                            <li>
                                                <a href="https://www.cnblogs.com/guangzanassistant/p/11879675.html">
                                                    2. 爱神的箭客户发卡号即可发货(16)
                                                </a>
                                            </li>
                                            <li>
                                                <a href="https://www.cnblogs.com/guangzanassistant/p/11910978.html">
                                                    3. 45345654(15)
                                                </a>
                                            </li>
                                            <li>
                                                <a href="https://www.cnblogs.com/guangzanassistant/p/12380553.html">
                                                    4. awescnb test1(13)
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>


                            </div>

                            <!-- 评论排行榜 -->
                            <div id="sidebar_topcommentedposts" class="sidebar-block">
                                <div class="catListFeedback">
                                    <h3 class="catListTitle">评论排行榜</h3>
                                    <div id="TopFeedbackPostsBlock">
                                        <ul style="word-break:break-all">
                                            <li>
                                                <a href="https://www.cnblogs.com/guangzanassistant/p/12064754.html">
                                                    1. 测试(1)
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>


                            </div>

                            <!-- 推荐排行榜 -->
                            <div id="sidebar_topdiggedposts" class="sidebar-block">

                            </div>
                        </div>

                    </div>

                </div>
                <!--end: sideBarMain -->
            </div>

            <div id="footer">
                Copyright © 2020 已注销用户456123
                <br>
                <span id="poweredby">Powered by .NET Core on Kubernetes</span></div>
        </div>
    </div>
</body>

</html>
